<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Life Simulator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
        }
        
        .container {
            max-width: 900px;
            width: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            position: relative;
        }
        
        .screen {
            padding: 30px;
            display: none;
        }
        
        .active-screen {
            display: block;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 25px;
            color: #4cc9f0;
            font-size: 2.5rem;
        }
        
        h2 {
            color: #4361ee;
            margin-bottom: 20px;
            font-size: 1.8rem;
        }
        
        .character-creation {
            text-align: center;
        }
        
        .input-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-size: 1.2rem;
            color: #f8f9fa;
        }
        
        input, select {
            width: 100%;
            max-width: 400px;
            padding: 12px 15px;
            border-radius: 8px;
            border: 2px solid #4361ee;
            background-color: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1rem;
            margin: 0 auto;
            display: block;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: #4cc9f0;
            box-shadow: 0 0 10px rgba(76, 201, 240, 0.5);
        }
        
        button {
            background: linear-gradient(90deg, #4361ee 0%, #3a0ca3 100%);
            color: white;
            border: none;
            padding: 14px 30px;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
            font-weight: 600;
            letter-spacing: 0.5px;
        }
        
        button:hover {
            background: linear-gradient(90deg, #3a0ca3 0%, #4361ee 100%);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.4);
        }
        
        .language-selector {
            margin-top: 30px;
            text-align: center;
        }
        
        .language-selector p {
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .language-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        
        .lang-btn {
            padding: 10px 20px;
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .lang-btn.active {
            background: linear-gradient(90deg, #4361ee 0%, #3a0ca3 100%);
        }
        
        .stats-container {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
            background-color: rgba(0, 0, 0, 0.3);
            padding: 20px;
            border-radius: 10px;
        }
        
        .stat {
            flex: 1;
            min-width: 150px;
            background: linear-gradient(135deg, #2d00aa 0%, #6a00f4 100%);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }
        
        .stat-name {
            font-size: 1.1rem;
            margin-bottom: 8px;
            color: #b8c0ff;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #ffd6ff;
        }
        
        .actions-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .action {
            background-color: rgba(67, 97, 238, 0.1);
            border: 2px solid #4361ee;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        
        .action:hover {
            background-color: rgba(67, 97, 238, 0.3);
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(67, 97, 238, 0.3);
        }
        
        .action-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        .action-title {
            font-size: 1.3rem;
            margin-bottom: 10px;
            color: #4cc9f0;
        }
        
        .action-description {
            font-size: 0.95rem;
            color: #cddafd;
            margin-bottom: 15px;
            line-height: 1.4;
        }
        
        .action-effects {
            font-size: 0.9rem;
            color: #ffd6ff;
            background-color: rgba(0, 0, 0, 0.3);
            padding: 8px 12px;
            border-radius: 5px;
            width: 100%;
        }
        
        .log-container {
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 10px;
            padding: 20px;
            max-height: 200px;
            overflow-y: auto;
            margin-top: 20px;
        }
        
        .log-title {
            font-size: 1.2rem;
            color: #4cc9f0;
            margin-bottom: 10px;
        }
        
        .log-message {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            color: #f8f9fa;
            font-size: 0.95rem;
        }
        
        .character-info {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(67, 97, 238, 0.5);
        }
        
        .character-name {
            font-size: 2rem;
            color: #4cc9f0;
            margin-bottom: 5px;
        }
        
        .character-day {
            font-size: 1.2rem;
            color: #b8c0ff;
        }
        
        .game-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .secondary-btn {
            background: linear-gradient(90deg, #7209b7 0%, #560bad 100%);
        }
        
        .secondary-btn:hover {
            background: linear-gradient(90deg, #560bad 0%, #7209b7 100%);
        }
        
        .danger-btn {
            background: linear-gradient(90deg, #f72585 0%, #b5179e 100%);
        }
        
        .danger-btn:hover {
            background: linear-gradient(90deg, #b5179e 0%, #f72585 100%);
        }
        
        .save-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.8);
            padding: 10px 20px;
            border-radius: 8px;
            border-left: 5px solid #4cc9f0;
            display: none;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
        }
        
        .save-indicator.show {
            display: block;
            animation: fadeInOut 2s ease-in-out;
        }
        
        @keyframes fadeInOut {
            0% { opacity: 0; transform: translateY(-20px); }
            20% { opacity: 1; transform: translateY(0); }
            80% { opacity: 1; transform: translateY(0); }
            100% { opacity: 0; transform: translateY(-20px); }
        }
        
        .load-screen {
            text-align: center;
        }
        
        .save-slots {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 500px;
            margin: 30px auto;
        }
        
        .save-slot {
            background: rgba(67, 97, 238, 0.1);
            border: 2px solid #4361ee;
            border-radius: 10px;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .save-slot:hover {
            background: rgba(67, 97, 238, 0.3);
            transform: translateY(-3px);
        }
        
        .save-info {
            text-align: left;
        }
        
        .save-name {
            font-size: 1.3rem;
            color: #4cc9f0;
            margin-bottom: 5px;
        }
        
        .save-details {
            color: #cddafd;
            font-size: 0.9rem;
        }
        
        .save-empty {
            text-align: center;
            padding: 40px;
            color: #888;
        }
        
        .save-actions {
            display: flex;
            gap: 10px;
        }
        
        .slot-btn {
            padding: 8px 15px;
            font-size: 0.9rem;
        }
        
        /* Version indicator */
        .version-indicator {
            position: absolute;
            bottom: 10px;
            right: 15px;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.5);
            font-style: italic;
            text-align: right;
            padding: 5px;
        }
        
        .version-indicator span {
            background: rgba(0, 0, 0, 0.3);
            padding: 3px 8px;
            border-radius: 4px;
            border: 1px solid rgba(76, 201, 240, 0.3);
        }
        
        /* Event overlay */
        .event-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            display: none;
        }
        
        .event-container {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 15px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.7);
            border: 3px solid #4361ee;
        }
        
        .event-title {
            color: #4cc9f0;
            font-size: 1.8rem;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .event-description {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #f8f9fa;
            text-align: center;
        }
        
        .event-choices {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .event-choice {
            background: rgba(67, 97, 238, 0.1);
            border: 2px solid #4361ee;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }
        
        .event-choice:hover {
            background: rgba(67, 97, 238, 0.3);
            transform: translateY(-3px);
        }
        
        .event-choice-effects {
            font-size: 0.9rem;
            color: #ffd6ff;
            margin-top: 8px;
            font-style: italic;
        }
        
        @media (max-width: 768px) {
            .stats-container {
                flex-direction: column;
            }
            
            .actions-container {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .save-slot {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .save-info {
                text-align: center;
            }
            
            .version-indicator {
                position: relative;
                bottom: 0;
                right: 0;
                text-align: center;
                margin-top: 20px;
                padding: 10px;
            }
            
            .event-choices {
                gap: 10px;
            }
            
            .event-choice {
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="save-indicator" id="save-indicator">
        <span id="save-message">Game saved successfully!</span>
    </div>
    
    <!-- Event overlay -->
    <div class="event-overlay" id="event-overlay">
        <div class="event-container">
            <h3 class="event-title" id="event-title">Unexpected Event!</h3>
            <div class="event-description" id="event-description"></div>
            <div class="event-choices" id="event-choices">
                <!-- Event choices will be added here -->
            </div>
        </div>
    </div>
    
    <div class="container">
        <!-- Character creation screen -->
        <div id="creation-screen" class="screen active-screen">
            <div class="character-creation">
                <h1 id="creation-title">Life Simulator</h1>
                
                <div class="input-group">
                    <label for="character-name" id="name-label">Enter your character's name:</label>
                    <input type="text" id="character-name" placeholder="Your name" maxlength="20">
                </div>
                
                <button id="start-game-btn">Start Game</button>
                <button id="load-game-btn" class="secondary-btn">Load Game</button>
                
                <div class="language-selector">
                    <p id="language-label">Select language:</p>
                    <div class="language-buttons">
                        <button class="lang-btn active" data-lang="en">English</button>
                        <button class="lang-btn" data-lang="ru">–†—É—Å—Å–∫–∏–π</button>
                    </div>
                </div>
            </div>
            <div class="version-indicator">
                <span>snapshot 2.0.0</span>
            </div>
        </div>
        
        <!-- Load game screen -->
        <div id="load-screen" class="screen">
            <div class="load-screen">
                <h1 id="load-title">Load Game</h1>
                <div id="save-slots-container" class="save-slots">
                    <!-- Save slots will be generated by JavaScript -->
                </div>
                <button id="back-to-menu-btn">Back to Menu</button>
                <div class="version-indicator">
                    <span>snapshot 2.0.0</span>
                </div>
            </div>
        </div>
        
        <!-- Game screen -->
        <div id="game-screen" class="screen">
            <div class="character-info">
                <h2 id="game-title">Life Simulator</h2>
                <div class="character-name" id="display-name">Alex</div>
                <div class="character-day" id="day-counter">Day: 1</div>
            </div>
            
            <div class="stats-container">
                <div class="stat">
                    <div class="stat-name" id="health-label">Health</div>
                    <div class="stat-value" id="health-value">100</div>
                </div>
                <div class="stat">
                    <div class="stat-name" id="energy-label">Energy</div>
                    <div class="stat-value" id="energy-value">100</div>
                </div>
                <div class="stat">
                    <div class="stat-name" id="happiness-label">Happiness</div>
                    <div class="stat-value" id="happiness-value">100</div>
                </div>
                <div class="stat">
                    <div class="stat-name" id="money-label">Money</div>
                    <div class="stat-value" id="money-value">100</div>
                </div>
            </div>
            
            <div class="actions-container">
                <!-- Actions will be generated by JavaScript -->
            </div>
            
            <div class="game-controls">
                <button id="save-game-btn" class="secondary-btn">Save Game</button>
                <button id="menu-btn">Main Menu</button>
                <button id="new-game-btn" class="danger-btn">New Game</button>
            </div>
            
            <div class="log-container">
                <div class="log-title" id="log-title">Game Log</div>
                <div id="game-log">
                    <div class="log-message" id="welcome-message">Welcome to the life simulator! Make choices to shape your character's life.</div>
                </div>
            </div>
            <div class="version-indicator">
                <span>snapshot 2.0.0</span>
            </div>
        </div>
    </div>

    <script>
        // Translations for different languages
        const translations = {
            en: {
                creationTitle: "Life Simulator",
                nameLabel: "Enter your character's name:",
                languageLabel: "Select language:",
                startButton: "Start Game",
                loadButton: "Load Game",
                loadTitle: "Load Game",
                backToMenu: "Back to Menu",
                saveGame: "Save Game",
                mainMenu: "Main Menu",
                newGame: "New Game",
                gameTitle: "Life Simulator",
                health: "Health",
                energy: "Energy",
                happiness: "Happiness",
                money: "Money",
                logTitle: "Game Log",
                welcomeMessage: "Welcome to the life simulator! Make choices to shape your character's life.",
                day: "Day",
                saveSuccess: "Game saved successfully!",
                loadSuccess: "Game loaded successfully!",
                saveDeleted: "Save deleted!",
                confirmNewGame: "Start new game? Current progress will be lost!",
                confirmDelete: "Delete this save?",
                emptySlot: "Empty Slot",
                player: "Player",
                days: "days",
                events: [
                    {
                        title: "Unexpected Opportunity",
                        description: "A friend offers you a chance to work on an exciting project together. It will require time and energy but could bring rewards.",
                        choices: [
                            {
                                text: "Accept the project",
                                effects: {energy: -20, money: +30, happiness: +10},
                                message: "You accepted the project. It's challenging but rewarding!"
                            },
                            {
                                text: "Politely decline",
                                effects: {happiness: -5, energy: +5},
                                message: "You declined the offer to focus on other things."
                            },
                            {
                                text: "Ask for time to think",
                                effects: {happiness: -2},
                                message: "You asked for time to consider the offer."
                            }
                        ]
                    },
                    {
                        title: "Health Emergency",
                        description: "You're not feeling well. You could ignore it or seek medical attention.",
                        choices: [
                            {
                                text: "Visit a doctor",
                                effects: {health: +20, money: -15},
                                message: "You visited a doctor and got proper treatment."
                            },
                            {
                                text: "Rest at home",
                                effects: {health: +10, energy: -15},
                                message: "You decided to rest at home to recover."
                            },
                            {
                                text: "Ignore it and keep working",
                                effects: {health: -25, money: +10},
                                message: "You ignored your health issues and kept working."
                            }
                        ]
                    },
                    {
                        title: "Financial Windfall",
                        description: "You received an unexpected bonus at work. How will you use it?",
                        choices: [
                            {
                                text: "Invest in self-improvement",
                                effects: {money: -25, happiness: +15, energy: +10},
                                message: "You invested in a course to improve your skills."
                            },
                            {
                                text: "Treat yourself",
                                effects: {money: -20, happiness: +25},
                                message: "You bought something nice for yourself."
                            },
                            {
                                text: "Save the money",
                                effects: {money: +30, happiness: +5},
                                message: "You wisely saved the bonus money."
                            }
                        ]
                    },
                    {
                        title: "Social Invitation",
                        description: "Friends invite you to a party, but you have important work tomorrow.",
                        choices: [
                            {
                                text: "Go to the party",
                                effects: {happiness: +25, energy: -30, health: -5},
                                message: "You had a great time at the party!"
                            },
                            {
                                text: "Stay home and rest",
                                effects: {energy: +20, happiness: -10},
                                message: "You decided to stay home and prepare for work."
                            },
                            {
                                text: "Go for a short time",
                                effects: {happiness: +10, energy: -15},
                                message: "You made a brief appearance at the party."
                            }
                        ]
                    },
                    {
                        title: "Career Crossroads",
                        description: "You're offered a promotion that requires more hours but pays significantly more.",
                        choices: [
                            {
                                text: "Accept the promotion",
                                effects: {money: +40, energy: -25, happiness: -10},
                                message: "You accepted the promotion and the new responsibilities."
                            },
                            {
                                text: "Decline for work-life balance",
                                effects: {happiness: +15, energy: +10},
                                message: "You prioritized your work-life balance."
                            },
                            {
                                text: "Negotiate better terms",
                                effects: {money: +20, energy: -15, happiness: +5},
                                message: "You negotiated a compromise that works for you."
                            }
                        ]
                    }
                ],
                actions: [
                    {
                        title: "Work",
                        description: "Go to work and earn money",
                        icon: "üíº",
                        effects: "+20 Money, -15 Energy, -5 Happiness"
                    },
                    {
                        title: "Exercise",
                        description: "Work out to improve health",
                        icon: "üèãÔ∏è",
                        effects: "+15 Health, -20 Energy, +5 Happiness"
                    },
                    {
                        title: "Rest",
                        description: "Relax and recover energy",
                        icon: "üò¥",
                        effects: "+30 Energy, +10 Happiness, -5 Money"
                    },
                    {
                        title: "Socialize",
                        description: "Spend time with friends",
                        icon: "üë•",
                        effects: "+20 Happiness, -10 Energy, -10 Money"
                    },
                    {
                        title: "Eat",
                        description: "Have a healthy meal",
                        icon: "üçé",
                        effects: "+15 Health, +10 Energy, -5 Money"
                    },
                    {
                        title: "Hobby",
                        description: "Do something you enjoy",
                        icon: "üéÆ",
                        effects: "+15 Happiness, -10 Energy"
                    }
                ]
            },
            ru: {
                creationTitle: "–°–∏–º—É–ª—è—Ç–æ—Ä –ñ–∏–∑–Ω–∏",
                nameLabel: "–í–≤–µ–¥–∏—Ç–µ –∏–º—è –≤–∞—à–µ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞:",
                languageLabel: "–í—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫:",
                startButton: "–ù–∞—á–∞—Ç—å –ò–≥—Ä—É",
                loadButton: "–ó–∞–≥—Ä—É–∑–∏—Ç—å –ò–≥—Ä—É",
                loadTitle: "–ó–∞–≥—Ä—É–∑–∏—Ç—å –ò–≥—Ä—É",
                backToMenu: "–í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –ú–µ–Ω—é",
                saveGame: "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ò–≥—Ä—É",
                mainMenu: "–ì–ª–∞–≤–Ω–æ–µ –ú–µ–Ω—é",
                newGame: "–ù–æ–≤–∞—è –ò–≥—Ä–∞",
                gameTitle: "–°–∏–º—É–ª—è—Ç–æ—Ä –ñ–∏–∑–Ω–∏",
                health: "–ó–¥–æ—Ä–æ–≤—å–µ",
                energy: "–≠–Ω–µ—Ä–≥–∏—è",
                happiness: "–°—á–∞—Å—Ç—å–µ",
                money: "–î–µ–Ω—å–≥–∏",
                logTitle: "–ñ—É—Ä–Ω–∞–ª –ò–≥—Ä—ã",
                welcomeMessage: "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —Å–∏–º—É–ª—è—Ç–æ—Ä –∂–∏–∑–Ω–∏! –î–µ–ª–∞–π—Ç–µ –≤—ã–±–æ—Ä, —á—Ç–æ–±—ã —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∂–∏–∑–Ω—å –≤–∞—à–µ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–∂–∞.",
                day: "–î–µ–Ω—å",
                saveSuccess: "–ò–≥—Ä–∞ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞!",
                loadSuccess: "–ò–≥—Ä–∞ —É—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–∞!",
                saveDeleted: "–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–æ!",
                confirmNewGame: "–ù–∞—á–∞—Ç—å –Ω–æ–≤—É—é –∏–≥—Ä—É? –¢–µ–∫—É—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å –±—É–¥–µ—Ç –ø–æ—Ç–µ—Ä—è–Ω!",
                confirmDelete: "–£–¥–∞–ª–∏—Ç—å —ç—Ç–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ?",
                emptySlot: "–ü—É—Å—Ç–æ–π —Å–ª–æ—Ç",
                player: "–ò–≥—Ä–æ–∫",
                days: "–¥–Ω–µ–π",
                events: [
                    {
                        title: "–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å",
                        description: "–î—Ä—É–≥ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–æ—Ä–∞–±–æ—Ç–∞—Ç—å –≤–º–µ—Å—Ç–µ –Ω–∞–¥ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º. –≠—Ç–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –∏ —ç–Ω–µ—Ä–≥–∏–∏, –Ω–æ –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–µ—Å—Ç–∏ –Ω–∞–≥—Ä–∞–¥—ã.",
                        choices: [
                            {
                                text: "–ü—Ä–∏–Ω—è—Ç—å –ø—Ä–æ–µ–∫—Ç",
                                effects: {energy: -20, money: +30, happiness: +10},
                                message: "–í—ã –ø—Ä–∏–Ω—è–ª–∏ –ø—Ä–æ–µ–∫—Ç. –≠—Ç–æ —Å–ª–æ–∂–Ω–æ, –Ω–æ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–∞–µ—Ç!"
                            },
                            {
                                text: "–í–µ–∂–ª–∏–≤–æ –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è",
                                effects: {happiness: -5, energy: +5},
                                message: "–í—ã –æ—Ç–∫–∞–∑–∞–ª–∏—Å—å –æ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, —á—Ç–æ–±—ã —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–∞ –¥—Ä—É–≥–∏—Ö –¥–µ–ª–∞—Ö."
                            },
                            {
                                text: "–ü–æ–ø—Ä–æ—Å–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞ —Ä–∞–∑–¥—É–º—å—è",
                                effects: {happiness: -2},
                                message: "–í—ã –ø–æ–ø—Ä–æ—Å–∏–ª–∏ –≤—Ä–µ–º—è, —á—Ç–æ–±—ã –æ–±–¥—É–º–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ."
                            }
                        ]
                    },
                    {
                        title: "–ü—Ä–æ–±–ª–µ–º—ã —Å–æ –∑–¥–æ—Ä–æ–≤—å–µ–º",
                        description: "–í—ã –ø–ª–æ—Ö–æ —Å–µ–±—è —á—É–≤—Å—Ç–≤—É–µ—Ç–µ. –ú–æ–∂–µ—Ç–µ –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∑–∞ –º–µ–¥–∏—Ü–∏–Ω—Å–∫–æ–π –ø–æ–º–æ—â—å—é.",
                        choices: [
                            {
                                text: "–ü–æ—Å–µ—Ç–∏—Ç—å –≤—Ä–∞—á–∞",
                                effects: {health: +20, money: -15},
                                message: "–í—ã –ø–æ—Å–µ—Ç–∏–ª–∏ –≤—Ä–∞—á–∞ –∏ –ø–æ–ª—É—á–∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ª–µ—á–µ–Ω–∏–µ."
                            },
                            {
                                text: "–û—Ç–¥–æ—Ö–Ω—É—Ç—å –¥–æ–º–∞",
                                effects: {health: +10, energy: -15},
                                message: "–í—ã —Ä–µ—à–∏–ª–∏ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å –¥–æ–º–∞, —á—Ç–æ–±—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è."
                            },
                            {
                                text: "–ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å",
                                effects: {health: -25, money: +10},
                                message: "–í—ã –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å–æ –∑–¥–æ—Ä–æ–≤—å–µ–º –∏ –ø—Ä–æ–¥–æ–ª–∂–∏–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å."
                            }
                        ]
                    },
                    {
                        title: "–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –¥–æ—Ö–æ–¥",
                        description: "–í—ã –ø–æ–ª—É—á–∏–ª–∏ –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—É—é –ø—Ä–µ–º–∏—é –Ω–∞ —Ä–∞–±–æ—Ç–µ. –ö–∞–∫ –≤—ã –µ–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ?",
                        choices: [
                            {
                                text: "–ò–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Å–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ",
                                effects: {money: -25, happiness: +15, energy: +10},
                                message: "–í—ã –≤–ª–æ–∂–∏–ª–∏—Å—å –≤ –∫—É—Ä—Å –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è —Å–≤–æ–∏—Ö –Ω–∞–≤—ã–∫–æ–≤."
                            },
                            {
                                text: "–ü–æ–±–∞–ª–æ–≤–∞—Ç—å —Å–µ–±—è",
                                effects: {money: -20, happiness: +25},
                                message: "–í—ã –∫—É–ø–∏–ª–∏ —Å–µ–±–µ —á—Ç–æ-—Ç–æ –ø—Ä–∏—è—Ç–Ω–æ–µ."
                            },
                            {
                                text: "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–µ–Ω—å–≥–∏",
                                effects: {money: +30, happiness: +5},
                                message: "–í—ã –º—É–¥—Ä–æ —Å–æ—Ö—Ä–∞–Ω–∏–ª–∏ –ø—Ä–µ–º–∏–∞–ª—å–Ω—ã–µ –¥–µ–Ω—å–≥–∏."
                            }
                        ]
                    },
                    {
                        title: "–°–æ—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ",
                        description: "–î—Ä—É–∑—å—è –ø—Ä–∏–≥–ª–∞—à–∞—é—Ç –≤–∞—Å –Ω–∞ –≤–µ—á–µ—Ä–∏–Ω–∫—É, –Ω–æ –∑–∞–≤—Ç—Ä–∞ —É –≤–∞—Å –≤–∞–∂–Ω–∞—è —Ä–∞–±–æ—Ç–∞.",
                        choices: [
                            {
                                text: "–ü–æ–π—Ç–∏ –Ω–∞ –≤–µ—á–µ—Ä–∏–Ω–∫—É",
                                effects: {happiness: +25, energy: -30, health: -5},
                                message: "–í—ã –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ –ø—Ä–æ–≤–µ–ª–∏ –≤—Ä–µ–º—è –Ω–∞ –≤–µ—á–µ—Ä–∏–Ω–∫–µ!"
                            },
                            {
                                text: "–û—Å—Ç–∞—Ç—å—Å—è –¥–æ–º–∞ –∏ –æ—Ç–¥–æ—Ö–Ω—É—Ç—å",
                                effects: {energy: +20, happiness: -10},
                                message: "–í—ã —Ä–µ—à–∏–ª–∏ –æ—Å—Ç–∞—Ç—å—Å—è –¥–æ–º–∞ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å—Å—è –∫ —Ä–∞–±–æ—Ç–µ."
                            },
                            {
                                text: "–°—Ö–æ–¥–∏—Ç—å –Ω–µ–Ω–∞–¥–æ–ª–≥–æ",
                                effects: {happiness: +10, energy: -15},
                                message: "–í—ã –Ω–µ–Ω–∞–¥–æ–ª–≥–æ –∑–∞–≥–ª—è–Ω—É–ª–∏ –Ω–∞ –≤–µ—á–µ—Ä–∏–Ω–∫—É."
                            }
                        ]
                    },
                    {
                        title: "–ö–∞—Ä—å–µ—Ä–Ω—ã–π –ø–µ—Ä–µ–∫—Ä–µ—Å—Ç–æ–∫",
                        description: "–í–∞–º –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç –ø–æ–≤—ã—à–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ —á–∞—Å–æ–≤, –Ω–æ –ø–ª–∞—Ç–∏—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±–æ–ª—å—à–µ.",
                        choices: [
                            {
                                text: "–ü—Ä–∏–Ω—è—Ç—å –ø–æ–≤—ã—à–µ–Ω–∏–µ",
                                effects: {money: +40, energy: -25, happiness: -10},
                                message: "–í—ã –ø—Ä–∏–Ω—è–ª–∏ –ø–æ–≤—ã—à–µ–Ω–∏–µ –∏ –Ω–æ–≤—ã–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏."
                            },
                            {
                                text: "–û—Ç–∫–∞–∑–∞—Ç—å—Å—è —Ä–∞–¥–∏ –±–∞–ª–∞–Ω—Å–∞ —Ä–∞–±–æ—Ç—ã –∏ –∂–∏–∑–Ω–∏",
                                effects: {happiness: +15, energy: +10},
                                message: "–í—ã –ø–æ—Å—Ç–∞–≤–∏–ª–∏ –±–∞–ª–∞–Ω—Å —Ä–∞–±–æ—Ç—ã –∏ –∂–∏–∑–Ω–∏ –Ω–∞ –ø–µ—Ä–≤–æ–µ –º–µ—Å—Ç–æ."
                            },
                            {
                                text: "–û–±—Å—É–¥–∏—Ç—å –ª—É—á—à–∏–µ —É—Å–ª–æ–≤–∏—è",
                                effects: {money: +20, energy: -15, happiness: +5},
                                message: "–í—ã –¥–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å –æ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å–µ, –∫–æ—Ç–æ—Ä—ã–π –≤–∞–º –ø–æ–¥—Ö–æ–¥–∏—Ç."
                            }
                        ]
                    }
                ],
                actions: [
                    {
                        title: "–†–∞–±–æ—Ç–∞",
                        description: "–ü–æ–π—Ç–∏ –Ω–∞ —Ä–∞–±–æ—Ç—É –∏ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –¥–µ–Ω–µ–≥",
                        icon: "üíº",
                        effects: "+20 –î–µ–Ω–µ–≥, -15 –≠–Ω–µ—Ä–≥–∏–∏, -5 –°—á–∞—Å—Ç—å—è"
                    },
                    {
                        title: "–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞",
                        description: "–ü–æ—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∑–¥–æ—Ä–æ–≤—å—è",
                        icon: "üèãÔ∏è",
                        effects: "+15 –ó–¥–æ—Ä–æ–≤—å—è, -20 –≠–Ω–µ—Ä–≥–∏–∏, +5 –°—á–∞—Å—Ç—å—è"
                    },
                    {
                        title: "–û—Ç–¥—ã—Ö",
                        description: "–†–∞—Å—Å–ª–∞–±–∏—Ç—å—Å—è –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç–Ω–µ—Ä–≥–∏—é",
                        icon: "üò¥",
                        effects: "+30 –≠–Ω–µ—Ä–≥–∏–∏, +10 –°—á–∞—Å—Ç—å—è, -5 –î–µ–Ω–µ–≥"
                    },
                    {
                        title: "–û–±—â–µ–Ω–∏–µ",
                        description: "–ü—Ä–æ–≤–µ—Å—Ç–∏ –≤—Ä–µ–º—è —Å –¥—Ä—É–∑—å—è–º–∏",
                        icon: "üë•",
                        effects: "+20 –°—á–∞—Å—Ç—å—è, -10 –≠–Ω–µ—Ä–≥–∏–∏, -10 –î–µ–Ω–µ–≥"
                    },
                    {
                        title: "–ü–æ–µ—Å—Ç—å",
                        description: "–ü—Ä–∏–Ω—è—Ç—å –∑–¥–æ—Ä–æ–≤—É—é –ø–∏—â—É",
                        icon: "üçé",
                        effects: "+15 –ó–¥–æ—Ä–æ–≤—å—è, +10 –≠–Ω–µ—Ä–≥–∏–∏, -5 –î–µ–Ω–µ–≥"
                    },
                    {
                        title: "–•–æ–±–±–∏",
                        description: "–ó–∞–Ω—è—Ç—å—Å—è –ª—é–±–∏–º—ã–º –¥–µ–ª–æ–º",
                        icon: "üéÆ",
                        effects: "+15 –°—á–∞—Å—Ç—å—è, -10 –≠–Ω–µ—Ä–≥–∏–∏"
                    }
                ]
            }
        };

        // Keys for localStorage
        const SAVE_KEY = 'life_simulator_saves';
        const LANGUAGE_KEY = 'life_simulator_language';
        
        // Current language - load from localStorage or default to English
        let currentLang = localStorage.getItem(LANGUAGE_KEY) || 'en';
        
        // Game variables
        let playerName = "Alex";
        let day = 1;
        let currentSaveSlot = null;
        let actionCounter = 0;
        let eventTriggerCounter = 0;
        
        // Character stats
        let stats = {
            health: 100,
            energy: 100,
            happiness: 100,
            money: 100
        };
        
        // Action history
        let gameLog = [];
        
        // DOM elements
        const creationScreen = document.getElementById('creation-screen');
        const loadScreen = document.getElementById('load-screen');
        const gameScreen = document.getElementById('game-screen');
        const creationTitle = document.getElementById('creation-title');
        const nameLabel = document.getElementById('name-label');
        const languageLabel = document.getElementById('language-label');
        const startButton = document.getElementById('start-game-btn');
        const loadButton = document.getElementById('load-game-btn');
        const characterNameInput = document.getElementById('character-name');
        const languageButtons = document.querySelectorAll('.lang-btn');
        
        const loadTitle = document.getElementById('load-title');
        const saveSlotsContainer = document.getElementById('save-slots-container');
        const backToMenuButton = document.getElementById('back-to-menu-btn');
        
        const gameTitle = document.getElementById('game-title');
        const displayName = document.getElementById('display-name');
        const dayCounter = document.getElementById('day-counter');
        const healthLabel = document.getElementById('health-label');
        const energyLabel = document.getElementById('energy-label');
        const happinessLabel = document.getElementById('happiness-label');
        const moneyLabel = document.getElementById('money-label');
        const healthValue = document.getElementById('health-value');
        const energyValue = document.getElementById('energy-value');
        const happinessValue = document.getElementById('happiness-value');
        const moneyValue = document.getElementById('money-value');
        const logTitle = document.getElementById('log-title');
        const welcomeMessage = document.getElementById('welcome-message');
        const gameLogContainer = document.getElementById('game-log');
        const actionsContainer = document.querySelector('.actions-container');
        
        const saveGameButton = document.getElementById('save-game-btn');
        const menuButton = document.getElementById('menu-btn');
        const newGameButton = document.getElementById('new-game-btn');
        
        const saveIndicator = document.getElementById('save-indicator');
        const saveMessage = document.getElementById('save-message');
        
        const eventOverlay = document.getElementById('event-overlay');
        const eventTitle = document.getElementById('event-title');
        const eventDescription = document.getElementById('event-description');
        const eventChoices = document.getElementById('event-choices');
        
        // Initialize game
        function initGame() {
            // Load saved language first
            loadLanguage();
            
            // Set up language button handlers
            languageButtons.forEach(btn => {
                btn.addEventListener('click', function() {
                    // Remove active class from all buttons
                    languageButtons.forEach(b => b.classList.remove('active'));
                    // Add active class to current button
                    this.classList.add('active');
                    // Set and save language
                    setLanguage(this.dataset.lang, true);
                });
            });
            
            // Button handlers
            startButton.addEventListener('click', startNewGame);
            loadButton.addEventListener('click', showLoadScreen);
            backToMenuButton.addEventListener('click', showMainMenu);
            saveGameButton.addEventListener('click', saveGame);
            menuButton.addEventListener('click', showMainMenu);
            newGameButton.addEventListener('click', confirmNewGame);
            
            // Generate random name for example
            const sampleNames = currentLang === 'en' 
                ? ['Alex', 'Sam', 'Jordan', 'Taylor', 'Morgan'] 
                : ['–ê–ª–µ–∫—Å–µ–π', '–ú–∞—Ä–∏—è', '–ò–≤–∞–Ω', '–ê–Ω–Ω–∞', '–î–º–∏—Ç—Ä–∏–π'];
            const randomName = sampleNames[Math.floor(Math.random() * sampleNames.length)];
            characterNameInput.value = randomName;
            
            // Check for autosave
            checkForAutoSave();
        }
        
        // Load language from localStorage
        function loadLanguage() {
            const savedLang = localStorage.getItem(LANGUAGE_KEY);
            if (savedLang) {
                currentLang = savedLang;
                
                // Update language buttons
                languageButtons.forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.dataset.lang === savedLang) {
                        btn.classList.add('active');
                    }
                });
                
                // Set initial language
                setLanguage(savedLang);
            } else {
                // Default to English
                setLanguage('en');
            }
        }
        
        // Save language to localStorage
        function saveLanguage(lang) {
            localStorage.setItem(LANGUAGE_KEY, lang);
        }
        
        // Check for autosave
        function checkForAutoSave() {
            const saves = getSaves();
            if (saves.auto) {
                if (confirm(currentLang === 'en' 
                    ? "Found an auto-save. Load it?" 
                    : "–ù–∞–π–¥–µ–Ω–æ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ. –ó–∞–≥—Ä—É–∑–∏—Ç—å –µ–≥–æ?")) {
                    loadGame('auto');
                }
            }
        }
        
        // Set language
        function setLanguage(lang, saveToStorage = false) {
            currentLang = lang;
            const t = translations[lang];
            
            // Save language if requested
            if (saveToStorage) {
                saveLanguage(lang);
            }
            
            // Update creation screen texts
            creationTitle.textContent = t.creationTitle;
            nameLabel.textContent = t.nameLabel;
            languageLabel.textContent = t.languageLabel;
            startButton.textContent = t.startButton;
            loadButton.textContent = t.loadButton;
            characterNameInput.placeholder = lang === 'en' ? "Your name" : "–í–∞—à–µ –∏–º—è";
            
            // Update load screen texts
            loadTitle.textContent = t.loadTitle;
            backToMenuButton.textContent = t.backToMenu;
            
            // Update game screen texts
            gameTitle.textContent = t.gameTitle;
            healthLabel.textContent = t.health;
            energyLabel.textContent = t.energy;
            happinessLabel.textContent = t.happiness;
            moneyLabel.textContent = t.money;
            logTitle.textContent = t.logTitle;
            welcomeMessage.textContent = t.welcomeMessage;
            dayCounter.textContent = `${t.day}: ${day}`;
            saveGameButton.textContent = t.saveGame;
            menuButton.textContent = t.mainMenu;
            newGameButton.textContent = t.newGame;
            
            // If game screen is active, update actions
            if (gameScreen.classList.contains('active-screen')) {
                generateActions();
            }
            
            // If load screen is active, update slots
            if (loadScreen.classList.contains('active-screen')) {
                renderSaveSlots();
            }
        }
        
        // Start new game
        function startNewGame() {
            // Get character name
            playerName = characterNameInput.value.trim();
            if (!playerName) {
                playerName = currentLang === 'en' ? "Alex" : "–ê–ª–µ–∫—Å–µ–π";
            }
            
            // Reset stats
            resetGame();
            
            // Update displayed name
            displayName.textContent = playerName;
            dayCounter.textContent = `${translations[currentLang].day}: ${day}`;
            
            // Update stats display
            updateStatsDisplay();
            
            // Generate actions
            generateActions();
            
            // Clear and update log
            gameLogContainer.innerHTML = '';
            addLogMessage(translations[currentLang].welcomeMessage);
            
            // Reset counters
            actionCounter = 0;
            eventTriggerCounter = 0;
            
            // Reset current save slot
            currentSaveSlot = null;
            
            // Switch screens
            showScreen('game');
        }
        
        // Reset game
        function resetGame() {
            stats = {
                health: 100,
                energy: 100,
                happiness: 100,
                money: 100
            };
            day = 1;
            gameLog = [];
        }
        
        // Show main menu
        function showMainMenu() {
            // Create autosave before exiting
            if (gameScreen.classList.contains('active-screen')) {
                autoSaveGame();
            }
            
            showScreen('creation');
        }
        
        // Confirm new game
        function confirmNewGame() {
            if (confirm(translations[currentLang].confirmNewGame)) {
                startNewGame();
            }
        }
        
        // Show load screen
        function showLoadScreen() {
            renderSaveSlots();
            showScreen('load');
        }
        
        // Show specific screen
        function showScreen(screenName) {
            // Hide all screens
            creationScreen.classList.remove('active-screen');
            loadScreen.classList.remove('active-screen');
            gameScreen.classList.remove('active-screen');
            
            // Show requested screen
            if (screenName === 'creation') {
                creationScreen.classList.add('active-screen');
            } else if (screenName === 'load') {
                loadScreen.classList.add('active-screen');
            } else if (screenName === 'game') {
                gameScreen.classList.add('active-screen');
            }
        }
        
        // Get all saves
        function getSaves() {
            const savesJSON = localStorage.getItem(SAVE_KEY);
            return savesJSON ? JSON.parse(savesJSON) : {};
        }
        
        // Save all saves
        function setSaves(saves) {
            localStorage.setItem(SAVE_KEY, JSON.stringify(saves));
        }
        
        // Render save slots
        function renderSaveSlots() {
            const saves = getSaves();
            const t = translations[currentLang];
            
            saveSlotsContainer.innerHTML = '';
            
            // Create 5 save slots
            for (let i = 1; i <= 5; i++) {
                const save = saves[i];
                const saveSlot = document.createElement('div');
                saveSlot.className = 'save-slot';
                
                if (save) {
                    // Filled slot
                    saveSlot.innerHTML = `
                        <div class="save-info">
                            <div class="save-name">${save.playerName}</div>
                            <div class="save-details">${t.day}: ${save.day}, ${t.health}: ${save.stats.health}, ${t.money}: ${save.stats.money}</div>
                            <div class="save-details">${new Date(save.timestamp).toLocaleString()}</div>
                        </div>
                        <div class="save-actions">
                            <button class="slot-btn" data-slot="${i}" data-action="load">${t.loadButton}</button>
                            <button class="slot-btn danger-btn" data-slot="${i}" data-action="delete">X</button>
                        </div>
                    `;
                } else {
                    // Empty slot
                    saveSlot.innerHTML = `
                        <div class="save-info">
                            <div class="save-name">${t.emptySlot}</div>
                            <div class="save-details">---</div>
                        </div>
                        <div class="save-actions">
                            <button disabled class="slot-btn" data-slot="${i}" data-action="load">${t.loadButton}</button>
                        </div>
                    `;
                }
                
                saveSlotsContainer.appendChild(saveSlot);
            }
            
            // Add handlers for slot buttons
            document.querySelectorAll('.slot-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const slot = this.dataset.slot;
                    const action = this.dataset.action;
                    
                    if (action === 'load') {
                        loadGame(slot);
                    } else if (action === 'delete') {
                        deleteSave(slot);
                    }
                });
            });
        }
        
        // Save game
        function saveGame() {
            const slot = prompt(currentLang === 'en' 
                ? "Enter save slot number (1-5):" 
                : "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä —Å–ª–æ—Ç–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è (1-5):", "1");
            
            if (!slot || !/^[1-5]$/.test(slot)) {
                alert(currentLang === 'en' 
                    ? "Please enter a number from 1 to 5." 
                    : "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 5.");
                return;
            }
            
            const saveData = {
                playerName: playerName,
                day: day,
                stats: {...stats},
                gameLog: [...gameLog],
                timestamp: new Date().getTime(),
                language: currentLang,
                actionCounter: actionCounter,
                eventTriggerCounter: eventTriggerCounter
            };
            
            const saves = getSaves();
            saves[slot] = saveData;
            setSaves(saves);
            
            currentSaveSlot = slot;
            
            showSaveMessage(translations[currentLang].saveSuccess);
        }
        
        // Autosave
        function autoSaveGame() {
            const saveData = {
                playerName: playerName,
                day: day,
                stats: {...stats},
                gameLog: [...gameLog],
                timestamp: new Date().getTime(),
                language: currentLang,
                actionCounter: actionCounter,
                eventTriggerCounter: eventTriggerCounter
            };
            
            const saves = getSaves();
            saves.auto = saveData;
            setSaves(saves);
        }
        
        // Load game
        function loadGame(slot) {
            const saves = getSaves();
            const saveData = saves[slot];
            
            if (!saveData) {
                alert(currentLang === 'en' 
                    ? "No save found in this slot." 
                    : "–í —ç—Ç–æ–º —Å–ª–æ—Ç–µ –Ω–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è.");
                return;
            }
            
            // Load data
            playerName = saveData.playerName;
            day = saveData.day;
            stats = {...saveData.stats};
            gameLog = [...saveData.gameLog];
            actionCounter = saveData.actionCounter || 0;
            eventTriggerCounter = saveData.eventTriggerCounter || 0;
            
            // Set save language if different from current
            if (saveData.language && saveData.language !== currentLang) {
                setLanguage(saveData.language, true);
                // Update active language button
                languageButtons.forEach(btn => {
                    btn.classList.remove('active');
                    if (btn.dataset.lang === saveData.language) {
                        btn.classList.add('active');
                    }
                });
            }
            
            // Update display
            displayName.textContent = playerName;
            dayCounter.textContent = `${translations[currentLang].day}: ${day}`;
            updateStatsDisplay();
            generateActions();
            
            // Update log
            gameLogContainer.innerHTML = '';
            if (gameLog.length > 0) {
                gameLog.slice(-10).forEach(message => {
                    addLogMessage(message, false);
                });
            } else {
                addLogMessage(translations[currentLang].welcomeMessage);
            }
            
            currentSaveSlot = slot;
            
            showSaveMessage(translations[currentLang].loadSuccess);
            showScreen('game');
        }
        
        // Delete save
        function deleteSave(slot) {
            if (!confirm(translations[currentLang].confirmDelete)) return;
            
            const saves = getSaves();
            delete saves[slot];
            setSaves(saves);
            
            renderSaveSlots();
            showSaveMessage(translations[currentLang].saveDeleted);
        }
        
        // Show save message
        function showSaveMessage(message) {
            saveMessage.textContent = message;
            saveIndicator.classList.add('show');
            
            setTimeout(() => {
                saveIndicator.classList.remove('show');
            }, 2000);
        }
        
        // Generate actions
        function generateActions() {
            actionsContainer.innerHTML = '';
            const actions = translations[currentLang].actions;
            
            actions.forEach((action, index) => {
                const actionElement = document.createElement('div');
                actionElement.className = 'action';
                actionElement.dataset.index = index;
                
                actionElement.innerHTML = `
                    <div class="action-icon">${action.icon}</div>
                    <div class="action-title">${action.title}</div>
                    <div class="action-description">${action.description}</div>
                    <div class="action-effects">${action.effects}</div>
                `;
                
                actionElement.addEventListener('click', () => performAction(index));
                actionsContainer.appendChild(actionElement);
            });
        }
        
        // Perform action
        function performAction(actionIndex) {
            actionCounter++;
            
            const actions = translations[currentLang].actions;
            const action = actions[actionIndex];
            
            // Effects based on action
            switch(actionIndex) {
                case 0: // Work
                    stats.money += 20;
                    stats.energy -= 15;
                    stats.happiness -= 5;
                    addLogMessage(currentLang === 'en' 
                        ? `You worked and earned money.` 
                        : `–í—ã –ø–æ—Ä–∞–±–æ—Ç–∞–ª–∏ –∏ –∑–∞—Ä–∞–±–æ—Ç–∞–ª–∏ –¥–µ–Ω–µ–≥.`);
                    break;
                case 1: // Exercise
                    stats.health += 15;
                    stats.energy -= 20;
                    stats.happiness += 5;
                    addLogMessage(currentLang === 'en' 
                        ? `You exercised and improved your health.` 
                        : `–í—ã –ø–æ—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞–ª–∏—Å—å –∏ —É–ª—É—á—à–∏–ª–∏ –∑–¥–æ—Ä–æ–≤—å–µ.`);
                    break;
                case 2: // Rest
                    stats.energy += 30;
                    stats.happiness += 10;
                    stats.money -= 5;
                    addLogMessage(currentLang === 'en' 
                        ? `You rested and recovered energy.` 
                        : `–í—ã –æ—Ç–¥–æ—Ö–Ω—É–ª–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ —ç–Ω–µ—Ä–≥–∏—é.`);
                    break;
                case 3: // Socialize
                    stats.happiness += 20;
                    stats.energy -= 10;
                    stats.money -= 10;
                    addLogMessage(currentLang === 'en' 
                        ? `You socialized with friends.` 
                        : `–í—ã –ø–æ–æ–±—â–∞–ª–∏—Å—å —Å –¥—Ä—É–∑—å—è–º–∏.`);
                    break;
                case 4: // Eat
                    stats.health += 15;
                    stats.energy += 10;
                    stats.money -= 5;
                    addLogMessage(currentLang === 'en' 
                        ? `You ate a healthy meal.` 
                        : `–í—ã –ø—Ä–∏–Ω—è–ª–∏ –∑–¥–æ—Ä–æ–≤—É—é –ø–∏—â—É.`);
                    break;
                case 5: // Hobby
                    stats.happiness += 15;
                    stats.energy -= 10;
                    addLogMessage(currentLang === 'en' 
                        ? `You enjoyed your hobby.` 
                        : `–í—ã –∑–∞–Ω—è–ª–∏—Å—å –ª—é–±–∏–º—ã–º –¥–µ–ª–æ–º.`);
                    break;
            }
            
            // Ensure stats stay within bounds
            clampStats();
            
            // Check for random event (30% chance every 2 actions)
            if (actionCounter > 0 && actionCounter % 2 === 0 && Math.random() < 0.3) {
                setTimeout(() => {
                    triggerRandomEvent();
                }, 300);
            }
            
            // Increase day after every third action
            if (actionCounter % 3 === 0) {
                day++;
                dayCounter.textContent = `${translations[currentLang].day}: ${day}`;
                
                // Each day slightly decrease stats (simulating natural needs)
                stats.energy -= 5;
                stats.happiness -= 3;
                addLogMessage(currentLang === 'en' 
                    ? `A new day begins.` 
                    : `–ù–∞—á–∏–Ω–∞–µ—Ç—Å—è –Ω–æ–≤—ã–π –¥–µ–Ω—å.`);
            }
            
            // Update stats display
            updateStatsDisplay();
            
            // Autosave after each action
            autoSaveGame();
            
            // Check game over conditions
            checkGameOver();
        }
        
        // Trigger random event
        function triggerRandomEvent() {
            const events = translations[currentLang].events;
            const randomEvent = events[Math.floor(Math.random() * events.length)];
            eventTriggerCounter++;
            
            // Show event overlay
            eventTitle.textContent = randomEvent.title;
            eventDescription.textContent = randomEvent.description;
            
            // Clear previous choices
            eventChoices.innerHTML = '';
            
            // Add new choices
            randomEvent.choices.forEach((choice, index) => {
                const choiceElement = document.createElement('div');
                choiceElement.className = 'event-choice';
                choiceElement.dataset.index = index;
                
                // Create effects text
                let effectsText = '';
                if (choice.effects.health) {
                    effectsText += choice.effects.health > 0 ? `+${choice.effects.health} ${translations[currentLang].health} ` : `${choice.effects.health} ${translations[currentLang].health} `;
                }
                if (choice.effects.energy) {
                    effectsText += choice.effects.energy > 0 ? `+${choice.effects.energy} ${translations[currentLang].energy} ` : `${choice.effects.energy} ${translations[currentLang].energy} `;
                }
                if (choice.effects.happiness) {
                    effectsText += choice.effects.happiness > 0 ? `+${choice.effects.happiness} ${translations[currentLang].happiness} ` : `${choice.effects.happiness} ${translations[currentLang].happiness} `;
                }
                if (choice.effects.money) {
                    effectsText += choice.effects.money > 0 ? `+${choice.effects.money} ${translations[currentLang].money} ` : `${choice.effects.money} ${translations[currentLang].money} `;
                }
                
                choiceElement.innerHTML = `
                    <div>${choice.text}</div>
                    <div class="event-choice-effects">${effectsText.trim()}</div>
                `;
                
                choiceElement.addEventListener('click', () => handleEventChoice(randomEvent, index));
                eventChoices.appendChild(choiceElement);
            });
            
            // Show the event overlay
            eventOverlay.style.display = 'flex';
        }
        
        // Handle event choice
        function handleEventChoice(event, choiceIndex) {
            const choice = event.choices[choiceIndex];
            
            // Apply effects
            if (choice.effects.health) stats.health += choice.effects.health;
            if (choice.effects.energy) stats.energy += choice.effects.energy;
            if (choice.effects.happiness) stats.happiness += choice.effects.happiness;
            if (choice.effects.money) stats.money += choice.effects.money;
            
            // Ensure stats stay within bounds
            clampStats();
            
            // Add log message
            addLogMessage(choice.message);
            
            // Update stats display
            updateStatsDisplay();
            
            // Hide event overlay
            eventOverlay.style.display = 'none';
            
            // Check game over conditions
            checkGameOver();
        }
        
        // Clamp stats between 0-100
        function clampStats() {
            for (let stat in stats) {
                if (stats[stat] > 100) stats[stat] = 100;
                if (stats[stat] < 0) stats[stat] = 0;
            }
        }
        
        // Update stats display
        function updateStatsDisplay() {
            healthValue.textContent = stats.health;
            energyValue.textContent = stats.energy;
            happinessValue.textContent = stats.happiness;
            moneyValue.textContent = stats.money;
            
            // Change stat color based on value
            updateStatColor(healthValue, stats.health);
            updateStatColor(energyValue, stats.energy);
            updateStatColor(happinessValue, stats.happiness);
            updateStatColor(moneyValue, stats.money);
        }
        
        // Update stat color
        function updateStatColor(element, value) {
            if (value > 70) {
                element.style.color = '#b5e48c'; // Green
            } else if (value > 30) {
                element.style.color = '#ffd166'; // Yellow
            } else {
                element.style.color = '#ef476f'; // Red
            }
        }
        
        // Add message to log
        function addLogMessage(message, addToArray = true) {
            const logEntry = document.createElement('div');
            logEntry.className = 'log-message';
            
            const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            logEntry.textContent = `[${time}] ${message}`;
            
            gameLogContainer.prepend(logEntry);
            
            if (addToArray) {
                gameLog.push(message);
            }
            
            // Limit number of messages in log
            if (gameLogContainer.children.length > 10) {
                gameLogContainer.removeChild(gameLogContainer.lastChild);
            }
        }
        
        // Check game over conditions
        function checkGameOver() {
            // If any stat drops to 0
            if (stats.health <= 0 || stats.energy <= 0 || stats.happiness <= 0 || stats.money <= 0) {
                let reason = '';
                if (stats.health <= 0) reason = currentLang === 'en' ? 'health' : '–∑–¥–æ—Ä–æ–≤—å–µ';
                else if (stats.energy <= 0) reason = currentLang === 'en' ? 'energy' : '—ç–Ω–µ—Ä–≥–∏—è';
                else if (stats.happiness <= 0) reason = currentLang === 'en' ? 'happiness' : '—Å—á–∞—Å—Ç—å–µ';
                else if (stats.money <= 0) reason = currentLang === 'en' ? 'money' : '–¥–µ–Ω—å–≥–∏';
                
                const message = currentLang === 'en' 
                    ? `Game over! Your ${reason} dropped to zero. You survived ${day} days.` 
                    : `–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –í–∞—à–µ ${reason} —É–ø–∞–ª–æ –¥–æ –Ω—É–ª—è. –í—ã –ø—Ä–æ–∂–∏–ª–∏ ${day} –¥–Ω–µ–π.`;
                
                addLogMessage(message);
                
                // Show game over message with only OK button
                setTimeout(() => {
                    alert(currentLang === 'en' 
                        ? `Game over! You survived ${day} days.` 
                        : `–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –í—ã –ø—Ä–æ–∂–∏–ª–∏ ${day} –¥–Ω–µ–π.`);
                    showScreen('creation');
                }, 500);
            }
            
            // Win after 30 days
            if (day >= 30) {
                addLogMessage(currentLang === 'en' 
                    ? `Congratulations! You successfully lived 30 days and completed the simulation!` 
                    : `–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–∂–∏–ª–∏ 30 –¥–Ω–µ–π –∏ –∑–∞–≤–µ—Ä—à–∏–ª–∏ —Å–∏–º—É–ª—è—Ü–∏—é!`);
                
                setTimeout(() => {
                    alert(currentLang === 'en' 
                        ? `Congratulations! You completed the simulation!` 
                        : `–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏ —Å–∏–º—É–ª—è—Ü–∏—é!`);
                    showScreen('creation');
                }, 500);
            }
        }
        
        // Initialize game on page load
        window.addEventListener('DOMContentLoaded', initGame);
        
        // Autosave when page is closed
        window.addEventListener('beforeunload', function() {
            if (gameScreen.classList.contains('active-screen')) {
                autoSaveGame();
            }
        });
    </script>
</body>
</html>
